{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\owner\\\\Desktop\\\\my-applications\\\\social-media\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport AlertComponent from \"./components/alert/AlertComponent.jsx\";\nimport PageRoute from \"./customRouter/PageRoute\";\nimport Login from \"./pages/login\";\nimport Home from \"./pages/home\";\nimport Register from \"./pages/register\";\nimport { refreshTokenAction } from \"./redux/actions/auth\";\nimport Header from \"./components/hedaer/Header\";\nimport PrivateRouter from \"./customRouter/privateRouter\";\nimport StatusModal from \"./components/modal/StatusModal\";\nimport { getPostsActions } from \"./redux/actions/post\";\nimport { getSuggestionsActions } from \"./redux/actions/seggestions\";\nimport io from \"socket.io-client\";\nimport { globalTypes } from \"./redux/type/types\";\nimport SocketClient from \"./SocketClient\";\nimport { getNotifiesAction } from \"./redux/actions/notify.js\";\nimport CallModel from \"./components/modal/CallModel.jsx\";\nimport Peer from \"peerjs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    auth,\n    status,\n    modal,\n    call\n  } = useSelector(state => state);\n  useEffect(() => {\n    dispatch(refreshTokenAction());\n    const socket = io();\n    dispatch({\n      type: globalTypes.SOCKET,\n      payload: socket\n    });\n    return () => socket.close();\n  }, [dispatch]);\n  useEffect(() => {\n    if (auth.token) {\n      dispatch(getPostsActions(auth.token));\n      dispatch(getSuggestionsActions(auth.token));\n      dispatch(getNotifiesAction(auth.token));\n    }\n  }, [dispatch, auth.token]);\n  useEffect(() => {\n    if (!(\"Notification\" in window)) {\n      alert(\"Ce navigateur ne prend pas en charge la notification de bureau\");\n    } // Vérifions si les autorisations de notification ont déjà été accordées\n    else if (Notification.permission === \"granted\") {} // Sinon, nous devons demander la permission à l'utilisateur\n    else if (Notification.permission !== \"denied\") {\n      Notification.requestPermission().then(permission => {\n        // Si l'utilisateur accepte, créons une notification\n        if (permission === \"granted\") {}\n      });\n    }\n  }, []); // peer\n\n  useEffect(() => {\n    // const newPeer = new Peer(undefined, {\n    //   host: \"/\",\n    //   port: \"3001\",\n    // });\n    const newPeer = new Peer(undefined, {\n      path: \"/\",\n      secure: true\n    });\n    dispatch({\n      type: globalTypes.PEER,\n      payload: newPeer\n    });\n  }, [dispatch]);\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: [/*#__PURE__*/_jsxDEV(AlertComponent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      id: \"theme\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `App ${(status || modal) && \"mode\"}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main\",\n        children: [auth.token && /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 26\n        }, this), auth.token && status && /*#__PURE__*/_jsxDEV(StatusModal, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 36\n        }, this), auth.token && /*#__PURE__*/_jsxDEV(SocketClient, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 26\n        }, this), auth.token && call && /*#__PURE__*/_jsxDEV(CallModel, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          component: auth.token ? Home : Login\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/login\",\n          component: Login\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/register\",\n          component: Register\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PrivateRouter, {\n          exact: true,\n          path: \"/:page\",\n          component: PageRoute\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PrivateRouter, {\n          exact: true,\n          path: \"/:page/:id\",\n          component: PageRoute\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"VDw3JwNA3FZPzbx+hnTZX8VFuns=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","BrowserRouter","Router","Route","AlertComponent","PageRoute","Login","Home","Register","refreshTokenAction","Header","PrivateRouter","StatusModal","getPostsActions","getSuggestionsActions","io","globalTypes","SocketClient","getNotifiesAction","CallModel","Peer","App","dispatch","auth","status","modal","call","state","socket","type","SOCKET","payload","close","token","window","alert","Notification","permission","requestPermission","then","newPeer","undefined","path","secure","PEER"],"sources":["C:/Users/owner/Desktop/my-applications/social-media/client/src/App.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport AlertComponent from \"./components/alert/AlertComponent.jsx\";\r\nimport PageRoute from \"./customRouter/PageRoute\";\r\nimport Login from \"./pages/login\";\r\nimport Home from \"./pages/home\";\r\nimport Register from \"./pages/register\";\r\nimport { refreshTokenAction } from \"./redux/actions/auth\";\r\nimport Header from \"./components/hedaer/Header\";\r\nimport PrivateRouter from \"./customRouter/privateRouter\";\r\nimport StatusModal from \"./components/modal/StatusModal\";\r\nimport { getPostsActions } from \"./redux/actions/post\";\r\nimport { getSuggestionsActions } from \"./redux/actions/seggestions\";\r\nimport io from \"socket.io-client\";\r\nimport { globalTypes } from \"./redux/type/types\";\r\nimport SocketClient from \"./SocketClient\";\r\nimport { getNotifiesAction } from \"./redux/actions/notify.js\";\r\nimport CallModel from \"./components/modal/CallModel.jsx\";\r\nimport Peer from \"peerjs\";\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n  const { auth, status, modal, call } = useSelector((state) => state);\r\n\r\n  useEffect(() => {\r\n    dispatch(refreshTokenAction());\r\n    const socket = io();\r\n    dispatch({ type: globalTypes.SOCKET, payload: socket });\r\n    return () => socket.close();\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (auth.token) {\r\n      dispatch(getPostsActions(auth.token));\r\n      dispatch(getSuggestionsActions(auth.token));\r\n      dispatch(getNotifiesAction(auth.token));\r\n    }\r\n  }, [dispatch, auth.token]);\r\n\r\n  useEffect(() => {\r\n    if (!(\"Notification\" in window)) {\r\n      alert(\"Ce navigateur ne prend pas en charge la notification de bureau\");\r\n    }\r\n\r\n    // Vérifions si les autorisations de notification ont déjà été accordées\r\n    else if (Notification.permission === \"granted\") {\r\n    }\r\n\r\n    // Sinon, nous devons demander la permission à l'utilisateur\r\n    else if (Notification.permission !== \"denied\") {\r\n      Notification.requestPermission().then((permission) => {\r\n        // Si l'utilisateur accepte, créons une notification\r\n        if (permission === \"granted\") {\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // peer\r\n  useEffect(() => {\r\n    // const newPeer = new Peer(undefined, {\r\n    //   host: \"/\",\r\n    //   port: \"3001\",\r\n    // });\r\n\r\n    const newPeer = new Peer(undefined, {\r\n      path: \"/\",\r\n      secure: true,\r\n    });\r\n    dispatch({\r\n      type: globalTypes.PEER,\r\n      payload: newPeer,\r\n    });\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <Router>\r\n      <AlertComponent />\r\n      <input type=\"checkbox\" id=\"theme\" />\r\n      <div className={`App ${(status || modal) && \"mode\"}`}>\r\n        <div className=\"main\">\r\n          {auth.token && <Header />}\r\n          {auth.token && status && <StatusModal />}\r\n          {auth.token && <SocketClient />}\r\n          {auth.token && call && <CallModel />}\r\n          <Route exact path=\"/\" component={auth.token ? Home : Login} />\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <PrivateRouter exact path=\"/:page\" component={PageRoute} />\r\n          <PrivateRouter exact path=\"/:page/:id\" component={PageRoute} />\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
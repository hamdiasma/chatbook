{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\owner\\\\Desktop\\\\my-applications\\\\social-media\\\\client\\\\src\\\\pages\\\\discover.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { discoverAction } from \"../redux/actions/discover\";\nimport LoadingIcon from \"../images/480px-Loader.gif\";\nimport PostThubnail from \"../components/profile/PostThubnail\";\nimport LoadMoreBtn from \"../components/btn/LoadMoreBtn\";\nimport { getData } from \"../utils/fetchData\";\nimport { discoverTypes } from \"../redux/type/types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Discover(props) {\n  _s();\n\n  const {\n    auth,\n    discover,\n    theme\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const [load, setload] = useState(false);\n  useEffect(() => {\n    if (!discover.firstLoad) {\n      dispatch(discoverAction(auth.token));\n    }\n  }, [dispatch, auth.token, discover.firstLoad]);\n\n  const handelLoadMore = async () => {\n    setload(true);\n    const res = await getData(`post_discover?num=${discover.page * 9}`, auth.token);\n    dispatch({\n      type: discoverTypes.UPDATE_DISCOVER_POSTS,\n      payload: res.data\n    });\n    setload(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [discover.loading ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: LoadingIcon,\n      alt: \"loading\",\n      className: \"d-block mx-auto  my-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(PostThubnail, {\n      auth: auth,\n      posts: discover.posts,\n      theme: theme,\n      result: discover.result\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), load && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: LoadingIcon,\n      width: \"200px\",\n      alt: \"loading\",\n      className: \"d-block mx-auto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), !discover.loading && /*#__PURE__*/_jsxDEV(LoadMoreBtn, {\n      result: discover.result,\n      page: discover.page,\n      load: discover.loading,\n      handelLoadMore: handelLoadMore\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Discover, \"uMUr84jXq4LA/95bhU+5YTEFEbE=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Discover;\nDiscover.propTypes = {};\nexport default Discover;\n\nvar _c;\n\n$RefreshReg$(_c, \"Discover\");","map":{"version":3,"names":["React","useEffect","useState","PropTypes","useDispatch","useSelector","discoverAction","LoadingIcon","PostThubnail","LoadMoreBtn","getData","discoverTypes","Discover","props","auth","discover","theme","state","dispatch","load","setload","firstLoad","token","handelLoadMore","res","page","type","UPDATE_DISCOVER_POSTS","payload","data","loading","posts","result","propTypes"],"sources":["C:/Users/owner/Desktop/my-applications/social-media/client/src/pages/discover.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { discoverAction } from \"../redux/actions/discover\";\r\nimport LoadingIcon from \"../images/480px-Loader.gif\";\r\nimport PostThubnail from \"../components/profile/PostThubnail\";\r\nimport LoadMoreBtn from \"../components/btn/LoadMoreBtn\";\r\nimport { getData } from \"../utils/fetchData\";\r\nimport { discoverTypes } from \"../redux/type/types\";\r\n\r\nfunction Discover(props) {\r\n  const { auth, discover, theme } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const [load, setload] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!discover.firstLoad) {\r\n      dispatch(discoverAction(auth.token));\r\n    }\r\n  }, [dispatch, auth.token, discover.firstLoad]);\r\n\r\n  const handelLoadMore = async () => {\r\n    setload(true);\r\n    const res = await getData(\r\n      `post_discover?num=${discover.page * 9}`,\r\n      auth.token\r\n    );\r\n    dispatch({\r\n      type: discoverTypes.UPDATE_DISCOVER_POSTS,\r\n      payload: res.data,\r\n    });\r\n    setload(false);\r\n  };\r\n  return (\r\n    <div>\r\n      {discover.loading ? (\r\n        <img\r\n          src={LoadingIcon}\r\n          alt=\"loading\"\r\n          className=\"d-block mx-auto  my-4\"\r\n        />\r\n      ) : (\r\n        <PostThubnail\r\n          auth={auth}\r\n          posts={discover.posts}\r\n          theme={theme}\r\n          result={discover.result}\r\n        />\r\n      )}\r\n      {load && (\r\n        <img\r\n          src={LoadingIcon}\r\n          width=\"200px\"\r\n          alt=\"loading\"\r\n          className=\"d-block mx-auto\"\r\n        />\r\n      )}\r\n      {!discover.loading && (\r\n        <LoadMoreBtn\r\n          result={discover.result}\r\n          page={discover.page}\r\n          load={discover.loading}\r\n          handelLoadMore={handelLoadMore}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nDiscover.propTypes = {};\r\n\r\nexport default Discover;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,cAAT,QAA+B,2BAA/B;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,YAAP,MAAyB,oCAAzB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,aAAT,QAA8B,qBAA9B;;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;EAAA;;EACvB,MAAM;IAAEC,IAAF;IAAQC,QAAR;IAAkBC;EAAlB,IAA4BX,WAAW,CAAEY,KAAD,IAAWA,KAAZ,CAA7C;EACA,MAAMC,QAAQ,GAAGd,WAAW,EAA5B;EACA,MAAM,CAACe,IAAD,EAAOC,OAAP,IAAkBlB,QAAQ,CAAC,KAAD,CAAhC;EAEAD,SAAS,CAAC,MAAM;IACd,IAAI,CAACc,QAAQ,CAACM,SAAd,EAAyB;MACvBH,QAAQ,CAACZ,cAAc,CAACQ,IAAI,CAACQ,KAAN,CAAf,CAAR;IACD;EACF,CAJQ,EAIN,CAACJ,QAAD,EAAWJ,IAAI,CAACQ,KAAhB,EAAuBP,QAAQ,CAACM,SAAhC,CAJM,CAAT;;EAMA,MAAME,cAAc,GAAG,YAAY;IACjCH,OAAO,CAAC,IAAD,CAAP;IACA,MAAMI,GAAG,GAAG,MAAMd,OAAO,CACtB,qBAAoBK,QAAQ,CAACU,IAAT,GAAgB,CAAE,EADhB,EAEvBX,IAAI,CAACQ,KAFkB,CAAzB;IAIAJ,QAAQ,CAAC;MACPQ,IAAI,EAAEf,aAAa,CAACgB,qBADb;MAEPC,OAAO,EAAEJ,GAAG,CAACK;IAFN,CAAD,CAAR;IAIAT,OAAO,CAAC,KAAD,CAAP;EACD,CAXD;;EAYA,oBACE;IAAA,WACGL,QAAQ,CAACe,OAAT,gBACC;MACE,GAAG,EAAEvB,WADP;MAEE,GAAG,EAAC,SAFN;MAGE,SAAS,EAAC;IAHZ;MAAA;MAAA;MAAA;IAAA,QADD,gBAOC,QAAC,YAAD;MACE,IAAI,EAAEO,IADR;MAEE,KAAK,EAAEC,QAAQ,CAACgB,KAFlB;MAGE,KAAK,EAAEf,KAHT;MAIE,MAAM,EAAED,QAAQ,CAACiB;IAJnB;MAAA;MAAA;MAAA;IAAA,QARJ,EAeGb,IAAI,iBACH;MACE,GAAG,EAAEZ,WADP;MAEE,KAAK,EAAC,OAFR;MAGE,GAAG,EAAC,SAHN;MAIE,SAAS,EAAC;IAJZ;MAAA;MAAA;MAAA;IAAA,QAhBJ,EAuBG,CAACQ,QAAQ,CAACe,OAAV,iBACC,QAAC,WAAD;MACE,MAAM,EAAEf,QAAQ,CAACiB,MADnB;MAEE,IAAI,EAAEjB,QAAQ,CAACU,IAFjB;MAGE,IAAI,EAAEV,QAAQ,CAACe,OAHjB;MAIE,cAAc,EAAEP;IAJlB;MAAA;MAAA;MAAA;IAAA,QAxBJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAkCD;;GAzDQX,Q;UAC2BP,W,EACjBD,W;;;KAFVQ,Q;AA2DTA,QAAQ,CAACqB,SAAT,GAAqB,EAArB;AAEA,eAAerB,QAAf"},"metadata":{},"sourceType":"module"}
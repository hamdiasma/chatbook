{"ast":null,"code":"import { authTypes, alertTypes } from \"../type/types\";\nimport { postData } from \"../../utils/fetchData\";\nimport { alertAction } from \"./alert\";\nimport { validation } from \"../../utils/validations\";\nexport const loginAction = data => async dispatch => {\n  try {\n    dispatch(alertAction({\n      loading: true\n    }));\n    const res = await postData(\"login\", data);\n    dispatch({\n      type: authTypes.LOGIN_USER,\n      payload: {\n        token: res.data.access_token,\n        user: res.data.user\n      }\n    });\n    localStorage.setItem(\"socialLogged\", true);\n    dispatch(alertAction({\n      success: res.data.msg\n    }));\n  } catch (error) {\n    dispatch(alertAction({\n      error: error.response.data.msg\n    }));\n  }\n};\nexport const refreshTokenAction = () => async dispatch => {\n  let socialLogged = localStorage.getItem(\"socialLogged\");\n\n  try {\n    if (socialLogged) {\n      dispatch(alertAction({\n        loading: true\n      }));\n      const res = await postData(\"refresh_token\", null, null);\n      dispatch({\n        type: authTypes.REFRESH_TOKEN,\n        payload: {\n          token: res.data.access_token,\n          user: res.data.user\n        }\n      });\n      dispatch(alertAction({\n        loading: false\n      }));\n    }\n  } catch (error) {\n    dispatch(alertAction({\n      error: error.response.data.msg\n    }));\n  }\n};\nexport const registerAction = data => async dispatch => {\n  let check = validation(data);\n\n  if (check.errLength > 0) {\n    return dispatch({\n      type: alertTypes.NOTIFY,\n      payload: check.errMsg\n    });\n  }\n\n  try {\n    dispatch(alertAction({\n      loading: true\n    }));\n    const res = await postData(\"register\", data);\n    dispatch({\n      type: authTypes.REGISTER_USER,\n      payload: {\n        token: res.data.access_token,\n        user: res.data.user\n      }\n    });\n    localStorage.setItem(\"socialLogged\", true);\n    dispatch(alertAction({\n      success: res.data.msg\n    }));\n  } catch (error) {\n    dispatch(alertAction({\n      error: error.response.data.msg\n    }));\n  }\n};\nexport const logOutAction = () => async dispatch => {\n  try {\n    const res = await postData(\"logout\");\n    dispatch({\n      type: authTypes.LOGOUT_USER,\n      payload: {}\n    });\n    localStorage.removeItem(\"socialLogged\");\n    dispatch(alertAction({\n      success: res.data.msg\n    }));\n  } catch (error) {\n    dispatch(alertAction({\n      error: error.response.data.msg\n    }));\n  }\n};","map":{"version":3,"names":["authTypes","alertTypes","postData","alertAction","validation","loginAction","data","dispatch","loading","res","type","LOGIN_USER","payload","token","access_token","user","localStorage","setItem","success","msg","error","response","refreshTokenAction","socialLogged","getItem","REFRESH_TOKEN","registerAction","check","errLength","NOTIFY","errMsg","REGISTER_USER","logOutAction","LOGOUT_USER","removeItem"],"sources":["C:/Users/owner/Desktop/my-applications/social-media/client/src/redux/actions/auth.js"],"sourcesContent":["import { authTypes, alertTypes } from \"../type/types\";\r\nimport { postData } from \"../../utils/fetchData\";\r\nimport { alertAction } from \"./alert\";\r\nimport { validation } from \"../../utils/validations\";\r\n\r\nexport const loginAction = (data) => async (dispatch) => {\r\n  try {\r\n    dispatch(alertAction({ loading: true }));\r\n    const res = await postData(\"login\", data);\r\n\r\n    dispatch({\r\n      type: authTypes.LOGIN_USER,\r\n      payload: {\r\n        token: res.data.access_token,\r\n        user: res.data.user,\r\n      },\r\n    });\r\n\r\n    localStorage.setItem(\"socialLogged\", true);\r\n    dispatch(alertAction({ success: res.data.msg }));\r\n  } catch (error) {\r\n    dispatch(alertAction({ error: error.response.data.msg }));\r\n  }\r\n};\r\n\r\nexport const refreshTokenAction = () => async (dispatch) => {\r\n  let socialLogged = localStorage.getItem(\"socialLogged\");\r\n\r\n  try {\r\n    if (socialLogged) {\r\n      dispatch(alertAction({ loading: true }));\r\n      const res = await postData(\"refresh_token\", null, null);\r\n      dispatch({\r\n        type: authTypes.REFRESH_TOKEN,\r\n        payload: {\r\n          token: res.data.access_token,\r\n          user: res.data.user,\r\n        },\r\n      });\r\n      dispatch(alertAction({ loading: false }));\r\n    }\r\n  } catch (error) {\r\n    dispatch(alertAction({ error: error.response.data.msg }));\r\n  }\r\n};\r\n\r\nexport const registerAction = (data) => async (dispatch) => {\r\n  let check = validation(data);\r\n  if (check.errLength > 0) {\r\n    return dispatch({\r\n      type: alertTypes.NOTIFY,\r\n      payload: check.errMsg,\r\n    });\r\n  }\r\n  try {\r\n    dispatch(alertAction({ loading: true }));\r\n    const res = await postData(\"register\", data);\r\n\r\n    dispatch({\r\n      type: authTypes.REGISTER_USER,\r\n      payload: {\r\n        token: res.data.access_token,\r\n        user: res.data.user,\r\n      },\r\n    });\r\n\r\n    localStorage.setItem(\"socialLogged\", true);\r\n    dispatch(alertAction({ success: res.data.msg }));\r\n  } catch (error) {\r\n    dispatch(alertAction({ error: error.response.data.msg }));\r\n  }\r\n};\r\n\r\nexport const logOutAction = () => async (dispatch) => {\r\n  try {\r\n    const res = await postData(\"logout\");\r\n    dispatch({\r\n      type: authTypes.LOGOUT_USER,\r\n      payload: {},\r\n    });\r\n    localStorage.removeItem(\"socialLogged\");\r\n    dispatch(alertAction({ success: res.data.msg }));\r\n  } catch (error) {\r\n    dispatch(alertAction({ error: error.response.data.msg }));\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}